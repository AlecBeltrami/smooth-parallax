!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.SmoothParallax=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e,r,n,o,i,a=t,c=0,l=0,s=[],u=[],g=["containerVisibility","pageScroll"],p={},f={basePercentageOn:"containerVisibility"},d=function(){var t={},e=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],r++);for(;r<n;r++)!function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e&&"[object Object]"===Object.prototype.toString.call(r[n])?t[n]=d(!0,t[n],r[n]):t[n]=r[n])}(arguments[r]);return t},y=function(t){var r=t.getAttribute("container");return e=t.parentNode,""!=r&&document.querySelector(r)&&(e=document.querySelector(r)),e},b=function(t){if(o=a.innerHeight,"containerVisibility"==i.basePercentageOn&&(r=t.container.scrollHeight,n=r-o,l=o-t.container.getBoundingClientRect().top,c=l/n||0),"pageScroll"==i.basePercentageOn){var e=document.documentElement||document.body;r=e.scrollHeight,l=a.pageYOffset||e.scrollTop,c=l/(r-e.clientHeight)}c<0?c=0:c>1&&(c=1)},x=function(){var t,e,r,n,o,i,a,c=["elementsize","containerSize"];s=document.querySelectorAll("[smooth-parallax]");for(var l=0;l<s.length;l++){t=parseFloat(s[l].getAttribute("start-movement"))||0,e=parseFloat(s[l].getAttribute("start-position-x"))||0,r=parseFloat(s[l].getAttribute("start-position-y"))||0,n=parseFloat(s[l].getAttribute("end-movement"))||1,o=parseFloat(s[l].getAttribute("end-position-x"))||0,i=parseFloat(s[l].getAttribute("end-position-y"))||0,a=s[l].getAttribute("base-size"),-1==c.indexOf(a)&&(a="elementSize");var g={container:y(s[l]),baseSizeOn:a,start:{percent:t,x:e,y:r},end:{percent:n,x:o,y:i},diff:{percent:n-t,x:o-e,y:i-r},target:{},current:{}};u.push(g)}},m=function(){b(n);for(var t=0;t<s.length;t++){var e,r,n=u[t];"elementSize"==n.baseSizeOn?(e=s[t].scrollWidth,r=s[t].scrollHeight):"containerSize"==n.baseSizeOn&&(e=n.container.scrollWidth-s[t].scrollWidth,r=n.container.scrollHeight-s[t].scrollHeight),c<=n.start.percent?(n.target.x=n.start.x*e,n.target.y=n.start.y*r):c>=n.end.percent?(n.target.x=n.end.x*e,n.target.y=n.end.y*r):(n.target.x=n.start.x*e+n.diff.x*(c-n.start.percent)/n.diff.percent*e,n.target.y=n.start.y*r+n.diff.y*(c-n.start.percent)/n.diff.percent*r),n.current.x&&n.current.y?(n.current.x=n.current.x+.1*(n.target.x-n.current.x),n.current.y=n.current.y+.1*(n.target.y-n.current.y)):(n.current.x=n.target.x,n.current.y=n.target.y),s[t].style.transform="translate3d("+n.current.x+"px, "+n.current.y+"px, 0)"}},h=function(){m(),requestAnimationFrame(h)},O=function(){var t=!0;return-1==g.indexOf(i.basePercentageOn)&&(t=!1,console.error("Value not supported for setting basePercentageOn: "+i.basePercentageOn)),t};return p.init=function(t){i=d(f,t||{}),O()&&(x(),h())},p.getScrollPercent=function(){return c},p});