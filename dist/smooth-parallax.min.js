!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.SmoothParallax=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e,r,n,o,a,c,i,s,l=0,u=0,p=[],d=[],f=t,g={},y={turkey:!0,mayo:!1,bread:"wheat"},m=function(){var t={},e=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],r++);for(;r<n;r++)!function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e&&"[object Object]"===Object.prototype.toString.call(r[n])?t[n]=m(!0,t[n],r[n]):t[n]=r[n])}(arguments[r]);return t},x=function(){var t=f.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1],lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}},b=function(t){var r=t.getAttribute("container-id");return e=""!=r&&document.getElementById(r)?document.getElementById(r):t.parentNode},h=function(t){r=t.container.scrollWidth,n=t.container.scrollHeight,o=n+f.innerHeight,u=f.innerHeight-t.container.getBoundingClientRect().top,(l=u/o||0)<0?l=0:l>1&&(l=1)},v=function(){var t,e,r,n,o,a;p=document.querySelectorAll("[smooth-parallax]");for(var c=0;c<p.length;c++){t=parseFloat(p[c].getAttribute("start-movement"))||0,e=parseFloat(p[c].getAttribute("start-position-x"))||0,r=parseFloat(p[c].getAttribute("start-position-y"))||0,n=parseFloat(p[c].getAttribute("end-movement"))||1,o=parseFloat(p[c].getAttribute("end-position-x"))||0,a=parseFloat(p[c].getAttribute("end-position-y"))||0;var i={container:b(p[c]),start:{percent:t,x:e,y:r},end:{percent:n,x:o,y:a},diff:{percent:n-t,x:o-e,y:a-r},target:{},current:{}};d.push(i)}},A=function(){for(var t=0;t<p.length;t++){var e,r=d[t],n=p[t].scrollWidth,o=p[t].scrollHeight;h(r),l<=r.start.percent?(r.target.x=r.start.x*n,r.target.y=r.start.y*o):l>=r.end.percent?(r.target.x=r.end.x*n,r.target.y=r.end.y*o):(r.target.x=r.start.x*n+r.diff.x*(l-r.start.percent)/r.diff.percent*n,r.target.y=r.start.y*o+r.diff.y*(l-r.start.percent)/r.diff.percent*o),r.current.x?(r.current.x=r.current.x+.1*(r.target.x-r.current.x),r.current.y=r.current.y+.1*(r.target.y-r.current.y)):(r.current.x=r.target.x,r.current.y=r.target.y),e="translate3d("+r.current.x+"px, "+r.current.y+"px, 0px)",p[t].style[c+"Transform"]=e,p[t].style.transform=e}},j=function(){a=x(),c="moz"==a.lowercase?"Moz":a.lowercase,i=a.css},w=function(){A(),requestAnimationFrame(w)};return g.init=function(t){s=m(y,t||{}),j(),v(),w()},g});