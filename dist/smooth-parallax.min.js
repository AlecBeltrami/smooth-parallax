!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.SmoothParallax=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e,r,n,o,a,c,i,u,s=t,l=0,p=0,y=[],f=[],g={},d={turkey:!0,mayo:!1,bread:"wheat"},x=function(){var t={},e=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],r++);for(;r<n;r++)!function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e&&"[object Object]"===Object.prototype.toString.call(r[n])?t[n]=x(!0,t[n],r[n]):t[n]=r[n])}(arguments[r]);return t},m=function(){var t=s.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1],lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}},b=function(t){var r=t.getAttribute("container");return e=t.parentNode,""!=r&&document.querySelector(r)&&(e=document.querySelector(r)),e},h=function(t){a=t.container.scrollWidth,c=t.container.scrollHeight,i=c+s.innerHeight,p=s.innerHeight-t.container.getBoundingClientRect().top,(l=p/i||0)<0?l=0:l>1&&(l=1)},v=function(){var t,e,r,n,o,a;y=document.querySelectorAll("[smooth-parallax]");for(var c=0;c<y.length;c++){t=parseFloat(y[c].getAttribute("start-movement"))||0,e=parseFloat(y[c].getAttribute("start-position-x"))||0,r=parseFloat(y[c].getAttribute("start-position-y"))||0,n=parseFloat(y[c].getAttribute("end-movement"))||1,o=parseFloat(y[c].getAttribute("end-position-x"))||0,a=parseFloat(y[c].getAttribute("end-position-y"))||0;var i={container:b(y[c]),start:{percent:t,x:e,y:r},end:{percent:n,x:o,y:a},diff:{percent:n-t,x:o-e,y:a-r},target:{},current:{}};f.push(i)}},A=function(){for(var t=0;t<y.length;t++){var e,r=f[t],o=y[t].scrollWidth,a=y[t].scrollHeight;h(r),l<=r.start.percent?(r.target.x=r.start.x*o,r.target.y=r.start.y*a):l>=r.end.percent?(r.target.x=r.end.x*o,r.target.y=r.end.y*a):(r.target.x=r.start.x*o+r.diff.x*(l-r.start.percent)/r.diff.percent*o,r.target.y=r.start.y*a+r.diff.y*(l-r.start.percent)/r.diff.percent*a),r.current.x&&r.current.y?(r.current.x=r.current.x+.1*(r.target.x-r.current.x),r.current.y=r.current.y+.1*(r.target.y-r.current.y)):(r.current.x=r.target.x,r.current.y=r.target.y),e="translate3d("+r.current.x+"px, "+r.current.y+"px, 0px)",y[t].style[n+"Transform"]=e,y[t].style.transform=e}},j=function(){r=m(),n="moz"==r.lowercase?"Moz":r.lowercase,o=r.css},w=function(){A(),requestAnimationFrame(w)};return g.init=function(t){u=x(d,t||{}),j(),v(),w()},g});