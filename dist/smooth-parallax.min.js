!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.SmoothParallax=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e,r,n,o,a,c=t,i=0,l=0,u=[],s=[],p={},g={basePercentageOn:"containerVisibility",baseMovementOn:"elementSize"},f=function(){var t={},e=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],r++);for(;r<n;r++)!function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e&&"[object Object]"===Object.prototype.toString.call(r[n])?t[n]=f(!0,t[n],r[n]):t[n]=r[n])}(arguments[r]);return t},y=function(t){var r=t.getAttribute("container");return e=t.parentNode,""!=r&&document.querySelector(r)&&(e=document.querySelector(r)),e},d=function(t){if(o=c.innerHeight,"containerVisibility"==a.basePercentageOn&&(r=t.container.scrollHeight,n=r-o,l=o-t.container.getBoundingClientRect().top,i=l/n||0),"pageScroll"==a.basePercentageOn){var e=document.documentElement||document.body;r=e.scrollHeight,l=c.pageYOffset||e.scrollTop,i=l/(r-e.clientHeight)}i<0?i=0:i>1&&(i=1)},x=function(){var t,e,r,n,o,a;u=document.querySelectorAll("[smooth-parallax]");for(var c=0;c<u.length;c++){t=parseFloat(u[c].getAttribute("start-movement"))||0,e=parseFloat(u[c].getAttribute("start-position-x"))||0,r=parseFloat(u[c].getAttribute("start-position-y"))||0,n=parseFloat(u[c].getAttribute("end-movement"))||1,o=parseFloat(u[c].getAttribute("end-position-x"))||0,a=parseFloat(u[c].getAttribute("end-position-y"))||0;var i={container:y(u[c]),start:{percent:t,x:e,y:r},end:{percent:n,x:o,y:a},diff:{percent:n-t,x:o-e,y:a-r},target:{},current:{}};s.push(i)}},b=function(){for(var t=0;t<u.length;t++){var e=s[t],r=u[t].scrollWidth,n=u[t].scrollHeight;d(e),i<=e.start.percent?(e.target.x=e.start.x*r,e.target.y=e.start.y*n):i>=e.end.percent?(e.target.x=e.end.x*r,e.target.y=e.end.y*n):(e.target.x=e.start.x*r+e.diff.x*(i-e.start.percent)/e.diff.percent*r,e.target.y=e.start.y*n+e.diff.y*(i-e.start.percent)/e.diff.percent*n),e.current.x&&e.current.y?(e.current.x=e.current.x+.1*(e.target.x-e.current.x),e.current.y=e.current.y+.1*(e.target.y-e.current.y)):(e.current.x=e.target.x,e.current.y=e.target.y),u[t].style.transform="translate3d("+e.current.x+"px, "+e.current.y+"px, 0)"}},m=function(){b(),requestAnimationFrame(m)};return p.init=function(t){a=f(g,t||{}),x(),m()},p.getScrollPercent=function(){return i},p});